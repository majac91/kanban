<div class="kanban-board">
  <div class="kanban-column">
    <div class="column-header">
      <h2 class="column-title">To Do</h2>
      <span class="task-count">{{ todoTasks().length }}</span>
    </div>
    <div class="column-content">
      <app-task-input></app-task-input>
      <div class="tasks-container"
           cdkDropList
           [id]="'todo'"
           [cdkDropListData]="todoTasks()"
           [cdkDropListConnectedTo]="['in-progress', 'done']"
           (cdkDropListDropped)="drop($event)">
        @for (task of todoTasks(); track task.id) {
          <app-task-card [task]="task" cdkDrag [cdkDragData]="task.id"></app-task-card>
        }
      </div>
    </div>
  </div>

  <div class="kanban-column">
    <div class="column-header">
      <h2 class="column-title">In Progress</h2>
      <span class="task-count">{{ inProgressTasks().length }}</span>
    </div>
    <div class="column-content">
      <div class="tasks-container"
           cdkDropList
           [id]="'in-progress'"
           [cdkDropListData]="inProgressTasks()"
           [cdkDropListConnectedTo]="['todo', 'done']"
           (cdkDropListDropped)="drop($event)">
        @for (task of inProgressTasks(); track task.id) {
          <app-task-card [task]="task" cdkDrag [cdkDragData]="task.id"></app-task-card>
        }
      </div>
    </div>
  </div>

  <div class="kanban-column">
    <div class="column-header">
      <h2 class="column-title">Done</h2>
      <span class="task-count">{{ doneTasks().length }}</span>
    </div>
    <div class="column-content">
      <div class="tasks-container"
           cdkDropList
           [id]="'done'"
           [cdkDropListData]="doneTasks()"
           [cdkDropListConnectedTo]="['todo', 'in-progress']"
           (cdkDropListDropped)="drop($event)">
        @for (task of doneTasks(); track task.id) {
          <app-task-card [task]="task" cdkDrag [cdkDragData]="task.id"></app-task-card>
        }
      </div>
    </div>
  </div>
</div>
